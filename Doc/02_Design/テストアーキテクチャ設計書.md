# ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ›¸

**ä½œæˆæ—¥**: 2025-10-13
**æœ€çµ‚æ›´æ–°**: 2025-10-13
**å¯¾è±¡ã‚·ã‚¹ãƒ†ãƒ **: ãƒ¦ãƒ“ã‚­ã‚¿ã‚¹è¨€èªç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
**Phase**: Phase B-F1å®Œäº†æ™‚ï¼ˆIssue #40 Phase 1-3å®Œäº†ï¼‰
**é–¢é€£ADR**: [ADR_020_ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ±ºå®š](../07_Decisions/ADR_020_ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ±ºå®š.md)

---

## ğŸ¯ ç›®çš„ãƒ»ã‚¹ã‚³ãƒ¼ãƒ—

### ç›®çš„
æœ¬è¨­è¨ˆæ›¸ã¯ã€ãƒ¦ãƒ“ã‚­ã‚¿ã‚¹è¨€èªç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å…¨ä½“æ§‹æˆã‚’å®šç¾©ã—ã€ä»¥ä¸‹ã®ç›®çš„ã‚’é”æˆã—ã¾ã™ï¼š

1. **ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆã®æ¨™æº–åŒ–**: ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ¥Ã—ãƒ†ã‚¹ãƒˆã‚¿ã‚¤ãƒ—åˆ¥åˆ†é›¢æ–¹å¼ã®æ˜ç¢ºåŒ–
2. **æ–°è¦ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆæ™‚ã®æŒ‡é‡æä¾›**: å‘½åè¦å‰‡ãƒ»å‚ç…§é–¢ä¿‚ãƒ»è¨€èªé¸æŠã®æ¨™æº–æä¾›
3. **Issue #40é¡ä¼¼å•é¡Œã®å†ç™ºé˜²æ­¢**: ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ•´åˆæ€§ç¶­æŒã®åŸºç›¤ç¢ºç«‹
4. **Phase B2ä»¥é™ã®æ‹¡å¼µæ€§ç¢ºä¿**: E2E Testsãƒ»Playwrightçµ±åˆã®åŸºç›¤æ§‹ç¯‰

### ã‚¹ã‚³ãƒ¼ãƒ—
- **å¯¾è±¡**: tests/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã®å…¨ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
- **é©ç”¨ç¯„å›²**: ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆãƒ»å‘½åè¦å‰‡ãƒ»å‚ç…§é–¢ä¿‚åŸå‰‡ãƒ»è¨€èªé¸æŠã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³
- **é™¤å¤–**: ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å±¤ï¼ˆsrc/ï¼‰ã®æ§‹æˆãƒ»ãƒ“ãƒ«ãƒ‰è¨­å®šã®è©³ç´°

---

## ğŸ“Š ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆå›³

### 7ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆã¨å‚ç…§é–¢ä¿‚

```mermaid
graph TB
    subgraph Tests["Tests Directory (tests/)"]
        subgraph FSharpUnit["F# Unit Tests"]
            DomainUnit["Domain.Unit.Tests<br/>(F#)"]
            AppUnit["Application.Unit.Tests<br/>(F#)"]
        end

        subgraph CSharpUnit["C# Unit Tests"]
            ContractsUnit["Contracts.Unit.Tests<br/>(C#)"]
            InfraUnit["Infrastructure.Unit.Tests<br/>(C#)"]
        end

        subgraph IntegrationUIE2E["C# Integration/UI/E2E Tests"]
            Integration["Infrastructure.Integration.Tests<br/>(C#)"]
            UI["Web.UI.Tests<br/>(C# / bUnit)"]
            E2E["E2E.Tests<br/>(C# / Playwright)"]
        end
    end

    subgraph Source["Source Projects (src/)"]
        Domain["Domain<br/>(F#)"]
        Application["Application<br/>(F# / UseCases)"]
        Contracts["Contracts<br/>(C# / DTOs/TypeConverters)"]
        Infrastructure["Infrastructure<br/>(C# / EF Core/Repository)"]
        Web["Web<br/>(C# / Blazor Server)"]
    end

    DomainUnit --> Domain
    AppUnit --> Application
    AppUnit --> Domain
    ContractsUnit --> Contracts
    ContractsUnit --> Domain
    ContractsUnit --> Application
    InfraUnit --> Infrastructure
    Integration --> Infrastructure
    Integration --> Application
    Integration --> Domain
    Integration --> Web
    Integration --> Contracts
    UI --> Web
    UI --> Contracts
    UI --> Application
    UI --> Domain
    E2E --> Web
    E2E --> Infrastructure
    E2E --> Application
    E2E --> Domain
    E2E --> Contracts

    style FSharpUnit fill:#e1f5fe
    style CSharpUnit fill:#fff3e0
    style IntegrationUIE2E fill:#fff3e0
    style Domain fill:#e1f5fe
    style Application fill:#e1f5fe
    style Contracts fill:#fff3e0
    style Infrastructure fill:#fff3e0
    style Web fill:#fff3e0
```

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆã‚µãƒãƒªãƒ¼

| ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå | è¨€èª | ãƒ†ã‚¹ãƒˆã‚¿ã‚¤ãƒ— | èª¬æ˜ |
|--------------|------|------------|------|
| Domain.Unit.Tests | F# | Unit | Domainãƒ¢ãƒ‡ãƒ«å˜ä½“ãƒ†ã‚¹ãƒˆ |
| Application.Unit.Tests | F# | Unit | UseCaseså˜ä½“ãƒ†ã‚¹ãƒˆ |
| Contracts.Unit.Tests | C# | Unit | DTOs/TypeConverterså˜ä½“ãƒ†ã‚¹ãƒˆ |
| Infrastructure.Unit.Tests | C# | Unit | Repositoryå˜ä½“ãƒ†ã‚¹ãƒˆ |
| Infrastructure.Integration.Tests | C# | Integration | DBçµ±åˆãƒ†ã‚¹ãƒˆï¼ˆWebApplicationFactory/Testcontainersï¼‰ |
| Web.UI.Tests | C# | UI | Blazorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ UIãƒ†ã‚¹ãƒˆï¼ˆbUnitï¼‰ |
| E2E.Tests | C# | E2E | ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ ãƒ†ã‚¹ãƒˆï¼ˆPlaywrightï¼‰ |

**åˆè¨ˆ**: 7ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

---

## ğŸ“ å‘½åè¦å‰‡

### åŸºæœ¬ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
```
{ProjectName}.{Layer}.{TestType}.Tests
```

### æ§‹æˆè¦ç´ 

#### ProjectNameï¼ˆå›ºå®šï¼‰
- **å€¤**: `UbiquitousLanguageManager`
- **ç†ç”±**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã®çµ±ä¸€ãƒ»ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³å†…ã§ã®ä¸€è²«æ€§

#### Layerï¼ˆãƒ¬ã‚¤ãƒ¤ãƒ¼åï¼‰
| Layerå€¤ | å¯¾è±¡ã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ | èª¬æ˜ |
|---------|---------------------|------|
| `Domain` | UbiquitousLanguageManager.Domain | F# ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ãƒ»ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ« |
| `Application` | UbiquitousLanguageManager.Application | F# UseCasesãƒ»ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ |
| `Contracts` | UbiquitousLanguageManager.Contracts | C# DTOsãƒ»TypeConvertersï¼ˆF#â†”C#å¢ƒç•Œï¼‰ |
| `Infrastructure` | UbiquitousLanguageManager.Infrastructure | C# EF Coreãƒ»Repositoryãƒ»å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹é€£æº |
| `Web` | UbiquitousLanguageManager.Web | C# Blazor Serverãƒ»UI |

#### TestTypeï¼ˆãƒ†ã‚¹ãƒˆã‚¿ã‚¤ãƒ—ï¼‰
| TestTypeå€¤ | èª¬æ˜ | å®Ÿè¡Œæ™‚é–“ç›®å®‰ | ä½¿ç”¨ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |
|-----------|------|------------|-----------------|
| `Unit` | å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆå¤–éƒ¨ä¾å­˜ãªã—ï¼‰ | < 1ç§’/test | xUnit + FsUnit/FluentAssertions |
| `Integration` | çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆDBæ¥ç¶šãƒ»WebApplicationFactoryï¼‰ | 1-10ç§’/test | xUnit + Testcontainers.PostgreSql |
| `UI` | UIãƒ†ã‚¹ãƒˆï¼ˆBlazorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰ | 1-5ç§’/test | bUnit + bUnit.web |
| `E2E` | ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆï¼ˆãƒ–ãƒ©ã‚¦ã‚¶è‡ªå‹•åŒ–ï¼‰ | 10-60ç§’/test | Playwright + Playwright MCP |

### å‘½åä¾‹

```
âœ… æ­£ã—ã„å‘½åä¾‹:
UbiquitousLanguageManager.Domain.Unit.Tests
UbiquitousLanguageManager.Application.Unit.Tests
UbiquitousLanguageManager.Contracts.Unit.Tests
UbiquitousLanguageManager.Infrastructure.Unit.Tests
UbiquitousLanguageManager.Infrastructure.Integration.Tests
UbiquitousLanguageManager.Web.UI.Tests
UbiquitousLanguageManager.E2E.Tests

âŒ èª¤ã£ãŸå‘½åä¾‹:
UbiquitousLanguageManager.Tests                    (Layerãƒ»TestTypeã®æ¬ è½)
UbiquitousLanguageManager.Domain.Tests             (TestTypeã®æ¬ è½)
UbiquitousLanguageManager.UnitTests                (Layerã®æ¬ è½)
UbiquitousLanguageManager.Domain.Application.Tests (è¤‡æ•°Layeræ··åœ¨)
```

### ä¾‹å¤–ã‚±ãƒ¼ã‚¹

**E2E.Testsã®å‘½åç†ç”±**:
- **Layerçœç•¥**: E2Eãƒ†ã‚¹ãƒˆã¯å…¨å±¤ã‚’ã¾ãŸãŒã‚‹ãŸã‚ã€ç‰¹å®šã®Layeråã‚’ä»˜ä¸ã—ãªã„
- **ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**: `{ProjectName}.E2E.Tests`
- **ç†ç”±**: ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ã‚·ãƒŠãƒªã‚ªãƒ†ã‚¹ãƒˆã¯ç‰¹å®šãƒ¬ã‚¤ãƒ¤ãƒ¼ã«å±ã•ãªã„æ¨ªæ–­çš„ãªãƒ†ã‚¹ãƒˆ

---

## ğŸ”— å‚ç…§é–¢ä¿‚åŸå‰‡

### åŸºæœ¬åŸå‰‡ï¼ˆADR_020æº–æ‹ ï¼‰

#### 1. Unit Tests: ãƒ†ã‚¹ãƒˆå¯¾è±¡ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ã¿å‚ç…§

**åŸå‰‡**: ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã¿ã‚’å‚ç…§ã—ã€ä»–ã®ä¾å­˜å±¤ã¯å‚ç…§ã—ãªã„

**ç†ç”±**:
- å˜ä½“ãƒ†ã‚¹ãƒˆã®ç‹¬ç«‹æ€§ä¿è¨¼
- é«˜é€Ÿãªãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆä¾å­˜é–¢ä¿‚æœ€å°åŒ–ï¼‰
- ãƒ†ã‚¹ãƒˆå¤±æ•—æ™‚ã®å½±éŸ¿ç¯„å›²æ˜ç¢ºåŒ–

**å‚ç…§ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒˆãƒªãƒƒã‚¯ã‚¹**:

| Unit Testãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ | å‚ç…§å¯èƒ½ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ | å‚ç…§ç¦æ­¢ |
|---------------------|---------------------|---------|
| Domain.Unit.Tests | Domain ã®ã¿ | Application / Contracts / Infrastructure / Web |
| Application.Unit.Tests | Application + Domain | Contracts / Infrastructure / Web |
| Contracts.Unit.Tests | Contracts + Domain + Application | Infrastructure / Web |
| Infrastructure.Unit.Tests | Infrastructure ã®ã¿ | Application / Domain / Contracts / Web |

**ä¾‹å¤–**: Application.Unit.Testsã¯Domainã‚’å‚ç…§å¯èƒ½ï¼ˆApplicationå±¤ãŒDomainå±¤ã«ä¾å­˜ã™ã‚‹ãŸã‚ï¼‰

#### 2. Integration Tests: å¿…è¦ãªä¾å­˜å±¤ã®ã¿å‚ç…§

**åŸå‰‡**: çµ±åˆãƒ†ã‚¹ãƒˆã«å¿…è¦ãªæœ€å°é™ã®ä¾å­˜å±¤ã‚’å‚ç…§

**Infrastructure.Integration.Testså‚ç…§é–¢ä¿‚**:
```xml
<ItemGroup>
  <ProjectReference Include="..\..\src\UbiquitousLanguageManager.Infrastructure\*.csproj" />
  <ProjectReference Include="..\..\src\UbiquitousLanguageManager.Application\*.fsproj" />
  <ProjectReference Include="..\..\src\UbiquitousLanguageManager.Domain\*.fsproj" />
  <ProjectReference Include="..\..\src\UbiquitousLanguageManager.Web\*.csproj" />
  <ProjectReference Include="..\..\src\UbiquitousLanguageManager.Contracts\*.csproj" />
</ItemGroup>
```

**ç†ç”±**:
- WebApplicationFactoryä½¿ç”¨ã®ãŸã‚Webå±¤å‚ç…§ãŒå¿…è¦
- Repositoryçµ±åˆãƒ†ã‚¹ãƒˆã®ãŸã‚Infrastructure + Application + Domainå‚ç…§ãŒå¿…è¦
- F#â†”C#å¢ƒç•Œãƒ†ã‚¹ãƒˆã®ãŸã‚Contractså‚ç…§ãŒå¿…è¦

#### 3. UI Tests: Webå±¤ + å¿…è¦ãªä¾å­˜å±¤ã‚’å‚ç…§

**Web.UI.Testså‚ç…§é–¢ä¿‚**:
```xml
<ItemGroup>
  <ProjectReference Include="..\..\src\UbiquitousLanguageManager.Web\*.csproj" />
  <ProjectReference Include="..\..\src\UbiquitousLanguageManager.Contracts\*.csproj" />
  <ProjectReference Include="..\..\src\UbiquitousLanguageManager.Application\*.fsproj" />
  <ProjectReference Include="..\..\src\UbiquitousLanguageManager.Domain\*.fsproj" />
</ItemGroup>
```

**ç†ç”±**:
- Blazor Serverã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆã®ãŸã‚ã€Webå±¤ + ãƒ¢ãƒƒã‚¯ç”¨ä¾å­˜å±¤å‚ç…§ãŒå¿…è¦

#### 4. E2E Tests: å…¨å±¤å‚ç…§å¯èƒ½

**E2E.Testså‚ç…§é–¢ä¿‚**:
```xml
<ItemGroup>
  <!-- å…¨å±¤å‚ç…§å¯èƒ½ -->
  <ProjectReference Include="..\..\src\UbiquitousLanguageManager.Web\*.csproj" />
  <ProjectReference Include="..\..\src\UbiquitousLanguageManager.Infrastructure\*.csproj" />
  <ProjectReference Include="..\..\src\UbiquitousLanguageManager.Application\*.fsproj" />
  <ProjectReference Include="..\..\src\UbiquitousLanguageManager.Domain\*.fsproj" />
  <ProjectReference Include="..\..\src\UbiquitousLanguageManager.Contracts\*.csproj" />
</ItemGroup>
```

**ç†ç”±**:
- ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ã‚·ãƒŠãƒªã‚ªãƒ†ã‚¹ãƒˆã¯å…¨å±¤ã‚’ã¾ãŸãŒã‚‹ãŸã‚ã€åˆ¶é™ãªã—

---

## ğŸ“ é…ç½®ãƒ«ãƒ¼ãƒ«ãƒ»åˆ¤æ–­åŸºæº–

### é…ç½®ãƒ«ãƒ¼ãƒ«

#### 1. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ç½®
```
ubiquitous-lang-mng/
â”œâ”€â”€ src/                      # ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ Domain/
â”‚   â”œâ”€â”€ Application/
â”‚   â”œâ”€â”€ Contracts/
â”‚   â”œâ”€â”€ Infrastructure/
â”‚   â””â”€â”€ Web/
â””â”€â”€ tests/                    # ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆå…¨ã¦é…ä¸‹ã«é…ç½®ï¼‰
    â”œâ”€â”€ Domain.Unit.Tests/
    â”œâ”€â”€ Application.Unit.Tests/
    â”œâ”€â”€ Contracts.Unit.Tests/
    â”œâ”€â”€ Infrastructure.Unit.Tests/
    â”œâ”€â”€ Infrastructure.Integration.Tests/
    â”œâ”€â”€ Web.UI.Tests/
    â””â”€â”€ E2E.Tests/
```

#### 2. ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ç™»éŒ²
- å…¨ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ `UbiquitousLanguageManager.sln` ã«ç™»éŒ²å¿…é ˆ
- ç™»éŒ²ã‚³ãƒãƒ³ãƒ‰: `dotnet sln add tests/{ProjectName}`

### ãƒ†ã‚¹ãƒˆã‚¿ã‚¤ãƒ—åˆ¤æ–­åŸºæº–

#### åˆ¤æ–­ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ

```mermaid
flowchart TD
    Start([æ–°è¦ãƒ†ã‚¹ãƒˆä½œæˆ])
    Q1{å¤–éƒ¨ä¾å­˜ã‚ã‚Š?}
    Q2{DBæ¥ç¶šã‚ã‚Š?}
    Q3{WebApplicationFactory<br/>ä½¿ç”¨?}
    Q4{Blazorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ<br/>ãƒ†ã‚¹ãƒˆ?}
    Q5{ãƒ–ãƒ©ã‚¦ã‚¶è‡ªå‹•åŒ–?}

    DomainUnit[Domain.Unit.Tests]
    AppUnit[Application.Unit.Tests]
    ContractsUnit[Contracts.Unit.Tests]
    InfraUnit[Infrastructure.Unit.Tests]
    Integration[Infrastructure.Integration.Tests]
    UI[Web.UI.Tests]
    E2E[E2E.Tests]

    Start --> Q1
    Q1 -->|ãªã—| DomainUnit
    Q1 -->|ãªã—| AppUnit
    Q1 -->|ãªã—| ContractsUnit
    Q1 -->|ãªã—| InfraUnit
    Q1 -->|ã‚ã‚Š| Q2
    Q2 -->|ã‚ã‚Š| Q3
    Q2 -->|ãªã—| Q4
    Q3 -->|ã‚ã‚Š| Integration
    Q3 -->|ãªã—| Integration
    Q4 -->|ã¯ã„| UI
    Q4 -->|ã„ã„ãˆ| Q5
    Q5 -->|ã¯ã„| E2E
    Q5 -->|ã„ã„ãˆ| Integration

    style DomainUnit fill:#e1f5fe
    style AppUnit fill:#e1f5fe
    style ContractsUnit fill:#fff3e0
    style InfraUnit fill:#fff3e0
    style Integration fill:#fff3e0
    style UI fill:#fff3e0
    style E2E fill:#fff3e0
```

#### åˆ¤æ–­åŸºæº–è©³ç´°

| åˆ¤æ–­ãƒã‚¤ãƒ³ãƒˆ | Unit | Integration | UI | E2E |
|------------|------|-------------|-----|-----|
| **å¤–éƒ¨ä¾å­˜ï¼ˆDB/API/Fileï¼‰** | ãªã— | ã‚ã‚Š | ã‚ã‚Šï¼ˆãƒ¢ãƒƒã‚¯åŒ–ï¼‰ | ã‚ã‚Šï¼ˆå®Ÿç’°å¢ƒï¼‰ |
| **å®Ÿè¡Œæ™‚é–“ç›®å®‰** | < 1ç§’ | 1-10ç§’ | 1-5ç§’ | 10-60ç§’ |
| **ä¸¦åˆ—å®Ÿè¡Œå¯èƒ½æ€§** | é«˜ | ä¸­ï¼ˆDBåˆ¶ç´„ã‚ã‚Šï¼‰ | é«˜ | ä½ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ãƒªã‚½ãƒ¼ã‚¹ï¼‰ |
| **ãƒ†ã‚¹ãƒˆå¯¾è±¡** | 1ã‚¯ãƒ©ã‚¹/1é–¢æ•° | è¤‡æ•°å±¤çµ±åˆ | Blazorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | UIã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ |
| **ä½¿ç”¨ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯** | xUnit | xUnit + Testcontainers | bUnit | Playwright |

---

## ğŸ”¤ è¨€èªé¸æŠã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### åŸºæœ¬åŸå‰‡

**åŸå‰‡**: ãƒ†ã‚¹ãƒˆå¯¾è±¡ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨åŒã˜è¨€èªã‚’é¸æŠ

**ç†ç”±**:
- F#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®C#ãƒ•ã‚¡ã‚¤ãƒ«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ä¸å¯ï¼ˆF#ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã®åˆ¶ç´„ï¼‰
- ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã¨ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®è¨€èªçµ±ä¸€ã«ã‚ˆã‚‹å¯èª­æ€§å‘ä¸Š

### è¨€èªé¸æŠãƒãƒˆãƒªãƒƒã‚¯ã‚¹

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | ãƒ†ã‚¹ãƒˆå¯¾è±¡è¨€èª | ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨€èª | ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |
|---------|--------------|---------------------|------------------|
| Domain | F# | F# | xUnit + FsUnit.xUnit |
| Application | F# | F# | xUnit + FsUnit.xUnit |
| Contracts | C# | C# | xUnit + FluentAssertions |
| Infrastructure | C# | C# | xUnit + FluentAssertions |
| Web | C# | C# | bUnit + bUnit.web |

### F#æ¨å¥¨ã‚±ãƒ¼ã‚¹
- Domainå±¤ã®ãƒ†ã‚¹ãƒˆï¼ˆF#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãŸã‚ï¼‰
- Applicationå±¤ã®ãƒ†ã‚¹ãƒˆï¼ˆF#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãŸã‚ï¼‰

### C#æ¨å¥¨ã‚±ãƒ¼ã‚¹
- Contractså±¤ã®ãƒ†ã‚¹ãƒˆï¼ˆC#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãŸã‚ï¼‰
- Infrastructureå±¤ã®ãƒ†ã‚¹ãƒˆï¼ˆC#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãŸã‚ï¼‰
- Webå±¤ã®ãƒ†ã‚¹ãƒˆï¼ˆC#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ + bUnitã¯C#å°‚ç”¨ï¼‰

### æ··åœ¨ç¦æ­¢
- âŒ F#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«C#ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’å«ã‚ãªã„
- âŒ C#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«F#ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’å«ã‚ãªã„

---

## ğŸ“¦ NuGetãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ¨™æº–æ§‹æˆ

### F# Unit Testsæ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

**å¯¾è±¡**: Domain.Unit.Tests / Application.Unit.Tests

```xml
<ItemGroup>
  <!-- xUnit Core -->
  <PackageReference Include="xunit" Version="2.9.0" />
  <PackageReference Include="xunit.runner.visualstudio" Version="2.8.2" />
  <PackageReference Include="Microsoft.NET.Test.Sdk" Version="17.11.1" />

  <!-- F# Testing -->
  <PackageReference Include="FsUnit.xUnit" Version="6.0.1" />

  <!-- Mocking -->
  <PackageReference Include="NSubstitute" Version="5.1.0" />
</ItemGroup>
```

### C# Unit Testsæ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

**å¯¾è±¡**: Contracts.Unit.Tests / Infrastructure.Unit.Tests

```xml
<ItemGroup>
  <!-- xUnit Core -->
  <PackageReference Include="xunit" Version="2.9.0" />
  <PackageReference Include="xunit.runner.visualstudio" Version="2.8.2" />
  <PackageReference Include="Microsoft.NET.Test.Sdk" Version="17.11.1" />

  <!-- Assertions -->
  <PackageReference Include="FluentAssertions" Version="6.12.1" />

  <!-- Mocking -->
  <PackageReference Include="Moq" Version="4.20.72" />
  <PackageReference Include="NSubstitute" Version="5.1.0" />
</ItemGroup>
```

### Integration Testsæ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

**å¯¾è±¡**: Infrastructure.Integration.Tests

```xml
<ItemGroup>
  <!-- xUnit Core -->
  <PackageReference Include="xunit" Version="2.9.0" />
  <PackageReference Include="xunit.runner.visualstudio" Version="2.8.2" />
  <PackageReference Include="Microsoft.NET.Test.Sdk" Version="17.11.1" />

  <!-- Integration Testing -->
  <PackageReference Include="Microsoft.AspNetCore.Mvc.Testing" Version="8.0.10" />
  <PackageReference Include="Microsoft.EntityFrameworkCore.InMemory" Version="8.0.10" />

  <!-- Testcontainers -->
  <PackageReference Include="Testcontainers.PostgreSql" Version="3.10.0" />
</ItemGroup>
```

### UI Testsæ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

**å¯¾è±¡**: Web.UI.Tests

```xml
<ItemGroup>
  <!-- xUnit Core -->
  <PackageReference Include="xunit" Version="2.9.0" />
  <PackageReference Include="xunit.runner.visualstudio" Version="2.8.2" />
  <PackageReference Include="Microsoft.NET.Test.Sdk" Version="17.11.1" />

  <!-- bUnit -->
  <PackageReference Include="bunit" Version="1.32.7" />
  <PackageReference Include="bunit.web" Version="1.32.7" />

  <!-- Mocking -->
  <PackageReference Include="Moq" Version="4.20.72" />
  <PackageReference Include="NSubstitute" Version="5.1.0" />
</ItemGroup>
```

### E2E Testsæ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

**å¯¾è±¡**: E2E.Tests

```xml
<ItemGroup>
  <!-- xUnit Core -->
  <PackageReference Include="xunit" Version="2.9.0" />
  <PackageReference Include="xunit.runner.visualstudio" Version="2.8.2" />
  <PackageReference Include="Microsoft.NET.Test.Sdk" Version="17.11.1" />

  <!-- Playwright -->
  <PackageReference Include="Microsoft.Playwright" Version="1.48.0" />
  <PackageReference Include="Microsoft.AspNetCore.Mvc.Testing" Version="8.0.10" />
</ItemGroup>
```

---

## âœ… ADR_020æº–æ‹ ç¢ºèª

### æ±ºå®šäº‹é …ã¨ã®æ•´åˆæ€§ãƒãƒˆãƒªãƒƒã‚¯ã‚¹

| ADR_020æ±ºå®šäº‹é … | æœ¬è¨­è¨ˆæ›¸ã§ã®å®Ÿè£… | æº–æ‹ çŠ¶æ³ |
|---------------|----------------|---------|
| **ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ¥Ã—ãƒ†ã‚¹ãƒˆã‚¿ã‚¤ãƒ—åˆ¥åˆ†é›¢** | 7ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆï¼ˆDomain.Unit / Application.Unit / Contracts.Unit / Infrastructure.Unit / Infrastructure.Integration / Web.UI / E2Eï¼‰ | âœ… å®Œå…¨æº–æ‹  |
| **å‘½åè¦å‰‡: `{ProjectName}.{Layer}.{TestType}.Tests`** | å…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§çµ±ä¸€é©ç”¨ï¼ˆä¾‹å¤–: E2E.Testsï¼‰ | âœ… å®Œå…¨æº–æ‹  |
| **å‚ç…§é–¢ä¿‚åŸå‰‡: Unit Tests = ãƒ†ã‚¹ãƒˆå¯¾è±¡ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ã¿å‚ç…§** | Unit Testså‚ç…§é–¢ä¿‚ãƒãƒˆãƒªãƒƒã‚¯ã‚¹å®šç¾©ï¼ˆDomain.Unit â†’ Domain ã®ã¿ï¼‰ | âœ… å®Œå…¨æº–æ‹  |
| **è¨€èªåˆ¥åˆ†é›¢: F# (Domain/Application) / C# (ãã®ä»–)** | è¨€èªé¸æŠã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ç­–å®š | âœ… å®Œå…¨æº–æ‹  |
| **æ¥­ç•Œæ¨™æº–æº–æ‹ : .NET Clean Architecture 2024** | Microsoft eShopOnWebãƒ‘ã‚¿ãƒ¼ãƒ³æ¡ç”¨ãƒ»Testcontainers/bUnit/Playwrightæ¨™æº–ä½¿ç”¨ | âœ… å®Œå…¨æº–æ‹  |

### ADR_020å‚ç…§ãƒªãƒ³ã‚¯
è©³ç´°ã¯ [ADR_020_ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ±ºå®š](../07_Decisions/ADR_020_ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ±ºå®š.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### è¨­è¨ˆãƒ»æ±ºå®šè¨˜éŒ²
- [ADR_020_ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ±ºå®š](../07_Decisions/ADR_020_ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ±ºå®š.md) - æœ¬è¨­è¨ˆæ›¸ã®æŠ€è¡“çš„æ ¹æ‹ 
- [ADR_019_namespaceè¨­è¨ˆè¦ç´„](../07_Decisions/ADR_019_namespaceè¨­è¨ˆè¦ç´„.md) - namespaceéšå±¤åŒ–ã®æ±ºå®šäº‹é …
- [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆæ›¸](./ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆæ›¸.md) - DBçµ±åˆãƒ†ã‚¹ãƒˆã®å‚ç…§ä»•æ§˜

### çµ„ç¹”ãƒ»é‹ç”¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [æ–°è¦ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³](../08_Organization/Rules/æ–°è¦ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³.md) - æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆæ™‚ã®æ¨™æº–æ‰‹é †
- [çµ„ç¹”ç®¡ç†é‹ç”¨ãƒãƒ‹ãƒ¥ã‚¢ãƒ«](../08_Organization/Rules/çµ„ç¹”ç®¡ç†é‹ç”¨ãƒãƒ‹ãƒ¥ã‚¢ãƒ«.md) - Phase/Stepå®Œäº†æ™‚ã®ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ•´åˆæ€§ç¢ºèª

---

**ä½œæˆæ—¥**: 2025-10-13
**ä½œæˆè€…**: Claude Code
**æ‰¿èªè€…**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚ªãƒ¼ãƒŠãƒ¼
