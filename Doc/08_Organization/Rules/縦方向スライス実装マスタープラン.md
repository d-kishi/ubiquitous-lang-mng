# 縦方向スライス実装マスタープラン（改訂版）

**目的**: プロジェクト全体の縦方向スライス実装戦略・順序・分割の統一管理
**適用範囲**: 全Phase実装・phase-start Command・プロジェクト管理
**作成日**: 2025-08-18
**改訂日**: 2025-09-22（Phase A実績・要件分析による全面見直し）
**元情報**: 要件定義書・機能仕様書・Phase A実績分析

## 🎯 実装戦略・基本方針

### 縦方向スライス実装アプローチ
- **概念**: 各機能について全層（Domain→Application→Infrastructure→Web）を貫通する最小動作版を優先実装
- **価値**: 早期価値提供・段階的検証・技術リスク分散・継続的フィードバック
- **Clean Architecture適用**: 境界整合性確保・F#↔C#統合・型変換システム検証

### Phase A実績から学んだ教訓
- **当初計画**: A1-A3（3段階）
- **実際実績**: A1-A9（9段階・300%拡大）
- **拡大要因**: 技術基盤確立・品質向上・技術負債解消・UI/UX改善

## 📋 Phase実装順序（確定）

### A. ユーザー管理機能 → B. プロジェクト管理機能 → C. ドメイン管理機能 → D. ユビキタス言語管理機能

**決定根拠**:
- **依存関係ベース**: A→B→C→Dの順で技術的依存関係が構築される
- **技術基盤確立**: A完了時点でClean Architecture基盤・認証システム・型変換システムが確立
- **価値駆動**: 各Phaseで独立した価値を提供・段階的ユーザー価値向上

## 🔄 Phase分割戦略（実績ベース・改訂版）

### 段階的実装アプローチ（5-8段階想定）
各Phaseを**現実的な段階数**で計画：

#### 基本実装段階（1-3）
1. **基本機能実装**: 最小CRUD・基本UI
2. **関連機能実装**: 業務ロジック・関連管理
3. **機能完成**: 高度機能・統合

#### 品質保証段階（4-6）
4. **品質改善**: 技術負債解消・コード品質向上
5. **UI/UX最適化**: ユーザビリティ改善・パフォーマンス最適化
6. **統合テスト**: E2E検証・本番準備

#### 拡張段階（7-8・必要に応じて）
7. **拡張機能**: 高度機能・外部連携
8. **運用最適化**: 監視・ログ・保守機能

## 📊 Phase特性別開発サイクル（改訂版）

### 🟢 中規模Phase（5段階）
**対象**: B（プロジェクト管理）
- **特徴**: プロジェクト・ユーザー関連管理・権限設定
- **期間**: 5-7セッション
- **組織**: 標準SubAgentパターン活用

### 🟡 大規模Phase（6段階）
**対象**: C（ドメイン管理）
- **特徴**: 承認ワークフロー・通知システム・権限階層
- **期間**: 7-9セッション
- **組織**: 専門性強化SubAgentパターン

### 🔴 超大規模Phase（7-8段階）
**対象**: D（ユビキタス言語管理）
- **特徴**: 状態管理・版管理・Excel風UI・外部連携
- **期間**: 10-12セッション
- **組織**: 複雑Phase対応SubAgentパターン

## 🎯 Phase別詳細実装計画

### A. ユーザー管理機能 ✅ 完了（2025-09-21）
**実績**: 9段階（A1-A9）・Clean Architecture 97点・技術基盤確立完了

### B. プロジェクト管理機能（改訂計画）

#### Phase B1: プロジェクト基本CRUD
- **対象**: プロジェクト作成・編集・削除・一覧表示
- **技術基盤**: A1-A9で確立された基盤活用
- **検証項目**: プロジェクト固有ビジネスロジック・Clean Architecture適用

#### Phase B2: ユーザー・プロジェクト関連管理
- **対象**: プロジェクトメンバー管理・UserProjects多対多関連・権限設定
- **技術検証**: 複雑関連データ管理・権限チェック統合

#### Phase B3: プロジェクト機能完成
- **対象**: 統計情報・デフォルトドメイン自動作成・削除時影響分析

#### Phase B4: 品質改善・技術負債解消
- **対象**: コード品質向上・技術負債解消・テスト充実

#### Phase B5: UI/UX最適化・統合テスト
- **対象**: ユーザビリティ改善・パフォーマンス最適化・E2E検証

### C. ドメイン管理機能（概要計画・6段階想定）

#### Phase C1: ドメイン基本CRUD
- **対象**: ドメイン作成・編集・削除・一覧表示

#### Phase C2: 承認者設定・権限管理
- **対象**: DomainApprovers管理・階層的権限設定

#### Phase C3: 承認ワークフロー実装
- **対象**: 承認申請・承認・却下フロー・状態管理

#### Phase C4: 通知システム統合準備
- **対象**: 承認・却下時の通知基盤（将来拡張対応）

#### Phase C5: 品質改善・技術負債解消
- **対象**: コード品質向上・技術負債解消・テスト充実

#### Phase C6: 統合テスト・最適化
- **対象**: E2E検証・パフォーマンス最適化・本番準備

### D. ユビキタス言語管理機能（概要計画・7-8段階想定）

#### Phase D1: 基本用語CRUD
- **対象**: 用語作成・編集・削除・基本検索

#### Phase D2: ドラフト・正式版状態管理
- **対象**: DraftUbiquitousLang・FormalUbiquitousLang・状態遷移

#### Phase D3: 承認ワークフロー統合
- **対象**: ドラフト→承認→正式版フロー・C Phase成果活用

#### Phase D4: 検索・フィルタ・ソート実装
- **対象**: 高度検索・多条件絞り込み・ソート機能

#### Phase D5: Excel風インライン編集UI
- **対象**: テーブル型UI・リアルタイム編集・ページング

#### Phase D6: Claude Code連携・エクスポート
- **対象**: Markdown出力・CSV出力・外部連携API

#### Phase D7: 品質改善・技術負債解消
- **対象**: コード品質向上・技術負債解消・テスト充実

#### Phase D8: 統合テスト・運用最適化（必要に応じて）
- **対象**: E2E検証・監視・ログ・保守機能・本番運用準備

## 🔧 技術検証・継続項目

### Phase A1-A9で確立済み技術基盤
- F#↔C#型変換システム（TypeConverter 1,539行）
- Clean Architecture境界整合性（97点品質）
- ASP.NET Core Identity統合・認証システム統一
- PostgreSQL接続・Entity Framework Core最適化
- Blazor Server認証フロー・ログ管理基盤
- SubAgent専門性活用・TDD実践・KPT管理システム

### 各Phaseでの新規検証項目
- **B1-B5**: プロジェクト管理複雑関連・多対多関係最適化
- **C1-C6**: 承認ワークフロー技術基盤・階層的権限判定・通知システム統合
- **D1-D8**: 状態管理・版管理・Excel風UI技術・外部連携API・大量データ処理

## 📈 段階的詳細化アプローチ

### Phase B詳細計画（即座実行可能）
**Phase B1-B5**: 具体的実装計画・SubAgent選択・技術要件確定

### Phase C・D概要計画（実績ベース見直し）
- **Phase B実績評価**: 実際の段階数・時間・品質を測定
- **C・D計画調整**: B実績を基にした現実的な段階数・期間見直し
- **継続的最適化**: 各Phase完了毎の計画精度向上

## 📊 価値提供・効果測定

### 段階的価値提供（改訂版）
1. **A1-A9完了**: 認証システム・技術基盤確立（**2025-09-21達成**）
2. **B1-B5完了**: プロジェクト管理・チーム機能・権限管理
3. **C1-C6完了**: ドメイン管理・承認ワークフロー・組織化機能
4. **D1-D8完了**: 用語管理・核心価値提供・外部連携・運用機能

### 継続改善・効果測定
- Phase完了毎の実績評価（段階数・時間・品質・技術負債）
- ユーザー価値・運用効果の段階的評価
- 次Phase実装効率・品質向上の確認・計画調整

## 🔄 運用・管理

### phase-start Command連携
- 本ファイルから実装順序・Phase特性・段階別計画を自動取得
- 現在のプロジェクト状況との照合・次期Phase/段階自動判定
- Phase固有準備事項・技術前提条件の確認

### プロジェクト状況管理
- Phase別進捗トラッカーとの整合性確保
- 完了Phase実績・未完了Phase計画の継続的更新
- 実装戦略の継続的改善・最適化・実績ベース調整

### 計画見直しサイクル
- **各Phase完了時**: 実績評価・次Phase計画調整
- **月次**: 全体計画の妥当性評価・戦略見直し
- **四半期**: 長期戦略・技術選択の根本見直し

---

**更新履歴**:
- 2025-08-18: Dailyから抽出・Rules配下に配置・phase-start Command連携対応
- **2025-09-22**: Phase A実績・要件定義書・機能仕様書に基づく全面改訂
  - Phase B: 5段階計画・Phase C: 6段階計画・Phase D: 7-8段階計画
  - 段階的詳細化アプローチ・実績ベース継続見直し体制確立