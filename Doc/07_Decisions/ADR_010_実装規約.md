# ADR_010: 実装規約（コメント指針・コーディング規約統合版）

**ステータス**: 承認済み  
**決定日**: 2025-07-06  
**決定者**: プロジェクトオーナー  
**記録者**: Claude Code  

## 背景・課題

### プロジェクト技術構成の複雑性
- **言語混在**: F# (Domain/Application) + C# (Infrastructure/Presentation)
- **アーキテクチャ**: Clean Architecture + DDD
- **技術スタック**: Blazor Server + PostgreSQL + Entity Framework Core

### プロジェクトオーナーの技術経験
- **Blazor Server**: 初学者レベル
- **F#**: 初学者レベル
- **懸念事項**: 実装コードのレビューが困難

### 個人開発の特性
- **Git運用**: 複雑なブランチ戦略・レビューフロー不要
- **一貫性の重要性**: 将来の自分への配慮、保守性確保
- **学習効率**: 明確なルールによる迷い削減

## 決定事項

### 1. 基本方針

#### 1.1 言語別責務分離
- **F#**: ドメインロジック、型定義、計算処理（Clean Architectureのコア層）
- **C#**: Blazorコンポーネント、Infrastructure層、外部システム統合

#### 1.2 依存関係の原則
- **C# → F#**: 許可（アプリケーション層・UI層からドメインロジック呼び出し）
- **F# → C#**: 原則禁止（Clean Architectureの依存関係ルール準拠）

### 2. コメント指針

#### 2.1 Blazor Server・F#初学者対応コメント徹底
**重要方針**: プロジェクトオーナーがBlazor ServerとF#の初学者のため、これらの分野では特に詳細なコメントを必須とする。

#### 2.2 必須コメント対象
- **Blazor Server**: コンポーネントライフサイクル・StateHasChanged・SignalR接続
- **F#**: パターンマッチング・Option型・Result型・関数型プログラミング概念
- **Clean Architecture境界**: F#↔C#の型変換・依存関係注入

#### 2.3 コメント品質基準
- **技術概念説明**: 使用理由・動作メカニズム・注意点
- **ビジネス文脈**: なぜこの実装が選択されたか
- **将来の自分への配慮**: 数ヶ月後でも理解可能な詳細度

### 3. ドキュメント作成方針

#### 3.1 C#ドキュメントコメント
- **継承活用**: `/// <inheritdoc/>`による重複削減
- **パラメータ説明**: すべてのpublicメソッドで必須
- **例外情報**: 発生する可能性のある例外を明記

#### 3.2 F#ドキュメントコメント
- **XMLドキュメント**: `/// <summary>`形式
- **`<seealso>`タグ**: 関連する型・関数への参照
- **型制約説明**: ジェネリック制約の説明

### 4. コーディング規約

#### 4.1 命名規則
- **F#**: camelCase（関数・変数）、PascalCase（型・モジュール）
- **C#**: PascalCase（パブリック）、camelCase（プライベート）
- **一貫性**: プロジェクト全体での統一性重視

#### 4.2 ファイル構成
- **F#プロジェクト内C#ファイル**: Infrastructure層実装のみ許可
- **依存関係**: プロジェクト参照による適切な分離
- **名前空間**: レイヤー構造を反映した階層化（詳細: ADR_019参照）

### 5. 品質保証

#### 5.1 コード品質基準
- **可読性**: 初学者でも理解可能なコメント・命名
- **保守性**: 明確な責務分離・適切な抽象化
- **テスト性**: 単体テスト容易な設計

#### 5.2 レビュー基準
- **コメント充実度**: 技術的複雑な部分の説明完備
- **規約準拠**: 命名・構造・依存関係の規約遵守
- **一貫性**: プロジェクト全体での統一性

## 技術的根拠

### 詳細コメント必須化の理由
1. **学習効率**: 初学者の理解促進・学習時間短縮
2. **保守性**: 将来のコード修正時の理解容易性
3. **品質向上**: レビュー時の問題発見・解決促進

### 言語分離の利点
1. **責務明確化**: 各言語の特性を活かした最適な配置
2. **学習負荷軽減**: 段階的な技術習得・複雑性管理
3. **保守性向上**: 明確な境界による影響範囲限定

## 実装影響

### 開発効率への影響
- **初期コスト**: 詳細コメント作成時間（コード作成時間の20-30%）
- **長期メリット**: 保守時間短縮・学習効果・品質向上

### 品質向上効果
- **理解容易性**: 技術初学者でも修正・拡張可能
- **一貫性**: 統一された開発スタイル・予測可能な構造
- **教育効果**: 実装を通じた技術学習・知識蓄積

## 関連文書

- **[コーディング規約](/Doc/08_Organization/Rules/コーディング規約.md)**: 詳細な実装パターン・サンプルコード
- **ADR_008**: ログ出力指針（コメントとログの使い分け）
- **ADR_009**: テスト指針（テストコードのコメント記述）

## レビュー履歴

| 日付 | レビュー者 | 結果 | コメント |
|------|------------|------|----------|
| 2025-07-06 | プロジェクトオーナー | 承認 | 初学者対応コメント方針が適切 |
| 2025-07-27 | Claude Code | 合理化 | 詳細実装例をコーディング規約に移管・基本方針に集約 |

---

**承認者**: プロジェクトオーナー  
**承認日**: 2025-07-06  
**有効期間**: プロジェクト実装フェーズ全体  
**合理化日**: 2025-07-27