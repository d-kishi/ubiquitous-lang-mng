# 申し送り事項

## 2025-06-29 終了時点の状況

### 完了事項（2025-06-29 セッション）
- ✅ **要件定義フェーズ完成**
- ✅ **ユーザーストーリー作成完了**（`/Doc/01_Requirements/ユーザーストーリー.md`）
- ✅ 25個のUser Story、6章構成、Mermaid図表統合
- ✅ **Mermaid記法採用決定・ADR記録**（`/Doc/07_Decisions/ADR_001_Mermaid記法採用.md`）
- ✅ 初期スーパーユーザー仕様修正（パスワード変更必須化、設定ファイル読み込み）
- ✅ Epic・Feature・User Story粒度整理（権限ロール別→機能別）

### 完了事項（2025-06-28 セッション）
- ✅ **機能仕様書作成完了**（`/Doc/01_Requirements/機能仕様書.md`）
- ✅ 10章構成、約1,200行の実装レベル詳細仕様書作成
- ✅ 追加要件ファイルの全項目反映（6カテゴリの詳細要件）
- ✅ 既存文書（要件定義書・画面設計書）との整合性確保
- ✅ 機能仕様書修正対応完了（データ管理方針・プロジェクト管理者設定・承認済みデータ編集フロー）

## 2025-06-27 終了時点の状況（前回セッション）

### 完了事項（2025-06-27 夕方セッション）
- ✅ **UI設計書レビュー指摘事項対応完了**（8項目修正）
- ✅ `/Doc/02_Design/UI設計/01_認証・ユーザー管理画面設計.md`（6画面→8画面に修正）
- ✅ `/Doc/02_Design/UI設計/02_プロジェクト・ドメイン管理画面設計.md`（プロジェクト管理者選択削除等）
- ✅ `/Doc/02_Design/UI設計/03_ユビキタス言語業務画面設計.md`（ドメイン列追加、削除権限詳細化等）
- ✅ **機能仕様書作成準備完了**（`/Doc/01_Requirements/Draft/機能仕様書_追加要件.md`）

### 完了事項（2025-06-27 午前セッション）
- ✅ **画面構成設計書作成完了**（3ファイル、全14画面の詳細設計）
- ✅ 画面構成設計追加要件の詳細確認完了
- ✅ ドキュメント管理体制更新（`/Doc/README.md`）

## 2025-06-26 終了時点の状況

### 完了事項（2025-06-26 夕方セッション追加分）
- ✅ **要件定義書作成完了**（`/Doc/01_Requirements/要件定義書.md`）
- ✅ プロジェクトオーナーレビュー対応完了（10項目修正）
- ✅ セッションゴール達成

### 完了事項（2025-06-26 午前セッション）
- ✅ 設計パターン見直し（CQRS → 従来型CRUD）
- ✅ F#適用範囲拡大（Infrastructure層も含む）
- ✅ 詳細要件確認完了（UI動作、競合処理、保存タイミング等）
- ✅ ユーザーロール・権限体系の詳細確定

## 2025-06-25 終了時点の状況

### 完了事項
- ✅ 要件整理完了（技術スタック、エンティティ設計、承認ワークフロー、Claude Code連携、検索機能）
- ✅ ドキュメント管理体制構築（/Doc ディレクトリ構成作成）
- ✅ 会議録作成（`/Doc/03_Meetings/2025-06-25_要件整理.md`）

### 次回実施予定のステップ候補（2025-06-29 更新）

**設計フェーズ（要件定義完成により移行）**:

1. **データベース設計書作成**（最優先）
   - 場所: `/Doc/02_Design/データベース設計書.md`
   - 内容: エンティティ詳細設計、ER図作成、テーブル設計
   - 活用技術: A5:SQL Mk-2（ER図）+ Mermaid（データライフサイクル図）
   - 状況: 機能仕様書のエンティティ定義を基に実装レベルまで詳細化

2. **システム設計書作成**
   - 場所: `/Doc/02_Design/システム設計書.md`
   - 内容: Clean Architectureの詳細設計、F#+C#+Blazor Server構成設計
   - 活用技術: Mermaid（アーキテクチャ図、データフロー図）

3. **技術PoC実施**
   - 目的: F# + Blazor Server + EFCore の動作検証
   - 記録先: `/Doc/05_Research/PoC結果/`
   - 重要性: 技術的実現可能性の確認

4. **API設計書作成**
   - 場所: `/Doc/02_Design/API設計書.md`
   - 内容: REST API仕様の詳細化
   - 活用技術: Mermaid（APIシーケンス図、認証フロー図）

### 重要な決定事項（再確認用）

#### 技術スタック（2025-06-26 修正版）
- ASP.NET Core + Blazor Server
- C# (Presentation層・Web API) + F# (ドメイン層・アプリケーション層・Infrastructure層)
- SQLite → PostgreSQL（部門長承認後移行）
- Clean Architecture + DDD + **従来型CRUD**（CQRS削除）

#### エンティティ設計の要点
- ドラフト用語 と 正式用語 は別エンティティ
- プロジェクト → ドメイン領域 → 用語 の階層構造
- 承認フロー: ドラフト → 清書 → 承認 → 正式版

#### UI設計の要点
- Excel風テーブル型インライン編集
- 従来型ページング（無限スクロールは不採用）
- プロジェクト選択必須、他条件任意
- **行単位保存**（行からフォーカスが外れた際に保存実行）
- **先勝ち競合処理**（保存時競合検知、警告表示でキャンセル）

#### ユーザーロール・権限体系（2025-06-26 確定）
- **スーパーユーザー**: 全プロジェクト管理・新規プロジェクト追加
- **プロジェクト管理者**: 担当プロジェクト内管理・ユーザー/ドメイン管理
- **ドメイン承認者**: 担当ドメイン承認・同一プロジェクト他ドメイン参照
- **一般ユーザー**: 担当ドメイン編集・同一プロジェクト他ドメイン参照
- **階層的権限管理**: 上位者が下位者の権限設定

### 次回実施予定の追加項目（2025-06-26 確定）

6. **システム全体の画面構成設計**
   - 全機能を網羅したUI設計
   - 画面遷移設計
   - Claude Code連携の操作フロー含む

7. **ユーザー情報テーブル設計**
   - 独自認証用テーブル設計
   - 将来の社内認証基盤連携を考慮
   - ロール・権限管理のデータ構造

### 次回セッション実施予定（2025-06-29 更新）

**設計フェーズ開始**：

1. **データベース設計書作成**（次回セッションで実施）
   - 作成場所: `/Doc/02_Design/データベース設計書.md`
   - 実施内容: 
     - エンティティ詳細設計、ER図作成、テーブル設計
     - A5:SQL Mk-2（ER図）+ Mermaid（データライフサイクル図）活用
     - 機能仕様書のエンティティ定義を基に実装レベルまで詳細化

2. **DB設計で確認予定の不足情報**
   - データ量・性能要件（プロジェクトあたりドメイン数、用語数等）
   - インデックス戦略（検索パフォーマンス詳細）
   - データ保持・アーカイブ方針（変更履歴保持期間等）
   - 設計プロセス中に必要に応じて確認する方針

**その後の設計フェーズ候補**：
3. **システム設計書作成** (`/Doc/02_Design/システム設計書.md`)
4. **技術PoC実施** (F# + Blazor Server + EFCore 動作検証)
5. **API設計書作成** (`/Doc/02_Design/API設計書.md`)

### 完了済み項目（参考）

**要件定義関連**:
- ✅ **要件定義書作成完了**（2025-06-26 完了）
- ✅ **機能仕様書作成完了**（2025-06-28 完了）
- ✅ **ユーザーストーリー作成完了**（2025-06-29 完了）

**画面設計関連**:
- ✅ **画面構成設計詳細要件確認**（2025-06-27 午前完了）
- ✅ **全14画面の画面設計書作成**（2025-06-27 午前完了）
- ✅ **UI設計書レビュー指摘事項対応**（2025-06-27 夕方完了）

**準備作業**:
- ✅ **機能仕様書作成準備**（2025-06-27 夕方完了）

### 今後のセッション運営方針（2025-06-26 確定）

**Claude Code からの積極的な情報要求**：
- 各ステップ進行前に、不足している情報を Claude Code から提示する
- 設計・実装に必要な要件の洗い出しを能動的に実施
- プロジェクトオーナーとの効率的な情報共有を促進

**適用タイミング**：
- 次回セッション以降、全ステップで適用
- 各フェーズ開始時の情報確認を標準化
- 不足情報の早期発見・解決によるスムーズな進行

---

**記録日時**: 2025-06-29  
**記録者**: Claude Code  
**次回対応者**: Claude Code  
**状態**: 要件定義フェーズ完成、次セッションでデータベース設計書作成予定