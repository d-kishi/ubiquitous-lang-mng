# ユーザーストーリー作成 追加要件

**作成日**: 2025-06-28  
**目的**: ユーザーストーリー作成に必要な詳細要件の確認  
**対象**: ユビキタス言語管理システム  

## 1. ユーザーストーリーの粒度・形式

### 1.1 階層構造

#### Epic・Feature・User Storyの分割方針
- **Epic（大機能単位）の粒度**:
  ```
  （例：ユーザー管理、用語管理、承認ワークフロー等）
  回答：
    - 認証・セッション管理
    - ユーザー・権限管理
    - プロジェクト・ドメイン管理
    - ユビキタス言語管理
    - 承認ワークフロー
    - 外部連携・エクスポート
  ```

- **Feature（中機能単位）の粒度**:
  ```
  （例：ユーザー登録、用語検索、承認申請等）
  回答：
    認証・セッション管理:
      - ログイン・ログアウト
      - パスワード管理
    ユーザー・権限管理:
      - ユーザー登録・編集・削除
      - プロフィール管理
    プロジェクト・ドメイン管理:
      - プロジェクト管理
      - ドメイン管理
    ユビキタス言語管理:
      - ドラフト用語管理
      - 承認済み用語参照・検索
      - 用語削除
    承認ワークフロー:
      - 承認申請
      - 承認・却下処理
    外部連携・エクスポート:
      - AI向けMarkdown出力
      - CSV出力
  ```

- **User Story（小機能単位）の粒度**:
  ```
  （例：「プロジェクト管理者として、新規ユーザーを登録したい」等）
  回答：
    権限ロール別ではなく、機能別に具体的なユーザー操作として整理：
    
    認証・セッション管理:
      - 一般ユーザーとして、メールアドレスとパスワードでログインしたい
      - ユーザーとして、パスワードを変更したい
      - ユーザーとして、パスワードをリセットしたい
    
    ユーザー・権限管理:
      - スーパーユーザーとして、新しいユーザーを登録したい
      - プロジェクト管理者として、担当プロジェクトのユーザーを編集したい
      - ユーザーとして、自分のプロフィール情報を変更したい
    
    プロジェクト・ドメイン管理:
      - スーパーユーザーとして、新しいプロジェクトを作成したい
      - プロジェクト管理者として、担当プロジェクトにドメインを追加したい
      - プロジェクト管理者として、ドメインの承認者を設定したい
    
    ユビキタス言語管理:
      - 一般ユーザーとして、新しいドラフト用語を作成したい
      - ユーザーとして、ドラフト用語を編集したい
      - ユーザーとして、承認済み用語を検索・確認したい
    
    承認ワークフロー:
      - ユーザーとして、ドラフト用語を承認申請したい
      - ドメイン承認者として、承認申請された用語を承認したい
      - ドメイン承認者として、承認申請された用語を却下したい
    
    外部連携・エクスポート:
      - ユーザーとして、承認済み用語をMarkdown形式で出力したい
      - ユーザーとして、承認済み用語をCSV形式で出力したい
  ```

#### 記述形式の選択
- **基本形式**:
  ```
  「As a [ユーザーロール], I want [機能・操作], So that [価値・目的]」形式
  この形式でよろしいですか？
  回答：日本語形式にしてください。
  ```

- **日本語での記述方針**:
  ```
  「[ユーザーロール]として、[機能・操作]したい。なぜなら[価値・目的]だから。」
  この形式でよろしいですか？
  回答：OKです
  ```

### 1.2 優先度設定

#### 優先度の分類方法
- **MoSCoW法**:
  ```
  Must have（必須）/ Should have（重要）/ Could have（あれば良い）/ Won't have（対象外）
  回答：OKです
  ```

- **数値レベル**:
  ```
  High（高）/ Medium（中）/ Low（低）
  回答：OKです
  ```

- **その他の方法**:
  ```
  回答：特になし
  ```

#### ビジネス価値の評価軸
- **ユーザー価値の重要度**:
  ```
  効率化 / 品質向上 / 利便性 / 学習コスト削減
  最も重視する価値軸を教えてください。
  回答：
  業務効率化が最重要で、次に編集や状態管理の利便性が重要です
  ```

## 2. 段階的実装の方針

### 2.1 MVP（最小実用版）の範囲

#### 最初のリリースで必須の機能
- **認証・ユーザー管理**:
  ```
  どの機能まで含めますか？（ログイン、ユーザー登録、権限管理等）
  回答：全機能必須です
  ```

- **用語管理**:
  ```
  どの機能まで含めますか？（作成、編集、一覧表示、検索等）
  回答：全機能必須です
  ```

- **承認ワークフロー**:
  ```
  どの機能まで含めますか？（申請、承認、却下、通知等）
  回答：全機能必須です
  ```

- **外部連携**:
  ```
  Claude Code連携（Markdown出力）は必須ですか？
  回答：必須です
  ```

### 2.2 段階的リリース計画

#### リリース段階数
- **想定しているリリース回数**:
  ```
  何回のリリースで全機能を完成させる予定ですか？
  回答：1回
  ```

#### 各段階での追加機能
- **第2段階で追加する機能**:
  ```
  回答：SQLite → PostgresへのDB移行
  ```

- **第3段階で追加する機能**:
  ```
  回答：なし
  ```

### 2.3 実装優先順位の考え方

#### 優先順位決定の重要要素
- **技術的依存関係 vs ビジネス価値**:
  ```
  どちらを重視しますか？バランスの考え方を教えてください。
  回答：技術7に対して、ビジネス価値3程度
  ```

- **ユーザーフィードバック取得のタイミング**:
  ```
  どの段階でユーザーからのフィードバックを取得したいですか？
  回答：サービス運用開始後2週間程度
  ```

## 3. アクセプタンスクライテリアの詳細度

### 3.1 記述レベル

#### テスト観点の詳細度
- **機能テスト**:
  ```
  「ログインができる」レベル / 「正しいメールアドレス・パスワードでログインに成功する」レベル
  どちらの詳細度が適切ですか？
  回答：「ログインができる」レベル。機能テストでは機能詳細レベルのテストを求めません。
  ```

- **UI操作テスト**:
  ```
  「データを保存できる」レベル / 「保存ボタンをクリックして成功メッセージが表示される」レベル
  どちらの詳細度が適切ですか？
  回答：
  「保存ボタンをクリックして成功メッセージが表示される」レベル。UIに対して明確な変化があるシナリオについては、その変化もテスト観点に含めます。
  例としては、「ユーザを登録に成功したら、ユーザ一覧に画面遷移する」といったような感じです。
  ```

#### エラーケース・境界値テスト
- **異常系テストの網羅度**:
  ```
  主要なエラーケースのみ / 考えられるエラーケースを網羅的に
  どちらが適切ですか？
  回答：主要エラーケースのみで大丈夫です。境界値テストは別途単体テストで実施する想定です。
  ```

- **データパターンテスト**:
  ```
  「文字数制限チェック」レベル / 「29文字・30文字・31文字での動作確認」レベル
  どちらの詳細度が適切ですか？
  回答：「文字数制限チェック」レベル
  ```

### 3.2 性能・操作性要件

#### 応答速度の具体的基準
- **許容応答時間**:
  ```
  「快適に操作できる」レベル / 「3秒以内に画面表示」レベル
  どちらの詳細度が適切ですか？
  回答：「快適に操作できる」レベル
  ```

## 4. 特定業務シナリオ

### 4.1 典型的な利用シーン

#### 日常的な用語管理作業
- **ミーティング中の用語追加**:
  ```
  どのような流れで用語を追加しますか？（議事録から転記、リアルタイム入力等）
  回答：
  リアルタイム入力で、最低でも所属するドメインと和名を設定します。
  場合によっては意味も設定しますが、必須ではありません。
  それ以外の項目はミーティング終了後に入力します。
  ```

- **用語の定期的な見直し**:
  ```
  どのような頻度・タイミングで用語の見直しを行いますか？
  回答：
  週1～2回程度、ドメイン承認者が見直しを行います。
  ```

#### プロジェクト開始時の初期設定
- **新規プロジェクト立ち上げ時**:
  ```
  どのような順序で初期設定を行いますか？
  （プロジェクト作成→ドメイン設定→ユーザー招待→初期用語登録等）
  回答：
  プロジェクト作成→プロジェクト管理者作成→ドメイン作成→ドメイン承認者と一般ユーザ作成
  ```

### 4.2 承認業務の具体的シナリオ

#### 承認者の判断基準
- **承認時の確認ポイント**:
  ```
  承認者はどのような観点で承認・却下を判断しますか？
  （定義の正確性、用語の必要性、既存用語との整合性等）
  回答：
  - 和名が正確で簡潔であること、和名の英名の意味が乖離していないか、同一ドメインの既存用語と重複していないか
  - 意味がドメインに詳しくない人間にも伝わる記述であるか
  ```

- **却下理由の典型パターン**:
  ```
  よくある却下理由を教えてください。
  回答：
  - 和名・意味が正しくない
  - 意味の記述内容が伝わりにくい内容である
  - 関連用語の設定に過不足がある
  ```

#### 承認フローの運用方針
- **承認期限・催促**:
  ```
  承認の期限管理は不要とのことですが、実際の運用ではどの程度の期間での承認を想定していますか？
  回答：1週間以内
  ```

### 4.3 Claude Code連携の実際の使い方

#### 出力タイミング・頻度
- **定期的な出力**:
  ```
  どのような頻度でMarkdown出力を行いますか？（毎日、週次、月次、必要時等）
  回答：必要に応じて。DDDプロジェクト初期段階はほぼ毎日になると思いますが、プロダクト開発工程に入った時点ではある程度ユビキタス言語は確定していると思いますので頻度は下がっていきます。
  ```

- **出力トリガー**:
  ```
  どのようなタイミングで出力しますか？（用語更新時、新機能開発前、定期メンテナンス等）
  回答：ユビキタス言語の承認を行い、開発チームのMTGでそれを確認した後
  ```

#### Claude Codeでの活用方法
- **具体的な活用シーン**:
  ```
  出力したMarkdownをClaude Codeでどのように活用しますか？
  （コード生成時の参照、設計書作成、コードレビュー等）
  回答：コード生成、設計書作成、コードレビュー、テストコード作成、マニュアル作成等のプロダクト開発全般にわたって活用します
  ```

## 5. 運用・保守に関する考慮事項

### 5.1 ユーザー教育・サポート

#### 新規ユーザーのオンボーディング
- **学習コスト**:
  ```
  新規ユーザーがシステムを使いこなすまでの許容学習時間はどの程度ですか？
  回答：2時間程度
  ```

- **ヘルプ・ガイダンス**:
  ```
  システム内ヘルプ機能は必要ですか？それとも別途マニュアルで対応しますか？
  回答：別途マニュアルを作成する想定ですが、複雑性はそれほどでも無いので作成しないかもしれません。
  ```

### 5.2 データ移行・初期データ

#### 既存データの移行
- **既存の用語データ**:
  ```
  現在Excelや他システムで管理している用語データはありますか？
  移行の必要性はありますか？
  回答：CSVで管理していますが、まだ数が少ないので手作業で移行します。
  ```

- **初期データの準備**:
  ```
  システム稼働開始時に登録しておく必要があるデータはありますか？
  （サンプル用語、テンプレート等）
  回答：不要です
  ```

---

**記入完了後の確認項目**:
- [x] 全ての項目について具体的な要件を記入した
- [x] 段階的実装計画について方針を明確にした
- [x] 業務シナリオについて実際の運用を想定した回答をした
- [x] Mermaid図表による可視化要件について方針を明確にした
- [x] 追加で必要な確認事項があれば最下部に記載した

## 6. Mermaid図表による可視化要件

### 6.1 ユーザージャーニー図の作成

#### ユーザージャーニー図の対象ロール
- **作成対象のユーザーロール**:
  ```
  4段階すべて（スーパーユーザー、プロジェクト管理者、ドメイン承認者、一般ユーザー）を作成しますか？
  それとも主要ロール（一般ユーザー、ドメイン承認者）のみですか？
  回答：すべて作成します。
  ```

#### ジャーニーの範囲・粒度
- **ジャーニーの開始・終了ポイント**:
  ```
  （例：ログイン〜ログアウト / 特定機能の利用開始〜完了）
  どの範囲でユーザージャーニーを描きたいですか？
  回答：Epic粒度のカテゴリの作業を完了するまで
  ```

- **ジャーニーのステップ粒度**:
  ```
  （例：画面単位 / 操作単位 / 業務タスク単位）
  どの粒度でジャーニーのステップを表現しますか？
  回答：業務タスク単位
  ```

### 6.2 ストーリーマップの構成

#### ストーリーマップの軸設定
- **横軸（時系列軸）の内容**:
  ```
  （例：ユーザーの行動フロー / システム利用の時系列 / 業務プロセスの順序）
  横軸に何を表現しますか？
  回答：ユーザ行動フロー
  ```

- **縦軸（優先度軸）の内容**:
  ```
  （例：Must have/Should have/Could have / 実装順序 / ユーザー価値の高低）
  縦軸に何を表現しますか？
  回答：Must have/Should have/Could have
  ```

#### Epic・Feature・User Storyの表現方法
- **階層の視覚的表現**:
  ```
  （例：色分け / 形状の違い / サイズの違い）
  Mermaid図で3階層をどのように区別して表現しますか？
  回答：色分け
  ```

### 6.3 ワークフロー図の詳細度

#### 承認ワークフローの図化範囲
- **承認フローの視点**:
  ```
  システム処理フロー / ユーザー操作フロー / 両方を統合したフロー
  どの視点で承認ワークフローを図化しますか？
  回答：ユーザー操作フロー
  ```

- **エラー・例外ケースの表現**:
  ```
  正常系のみ / 主要な例外ケースも含める / 全例外ケースを網羅
  どのレベルまでフロー図に含めますか？
  回答：主要な例外ケースも含める
  ```

#### 画面遷移との関連付け
- **画面遷移図との統合**:
  ```
  ユーザージャーニー図に画面名を含める / 別途画面遷移図を参照 / 統合した図を作成
  どの方法で画面遷移と関連付けますか？
  回答： 別途画面遷移図を参照
  ```

### 6.4 図表の管理・更新方針

#### 図表の保守性
- **図表の分割方針**:
  ```
  1つの大きな図 / 機能別に複数の図に分割 / ロール別に分割
  図表の分割単位をどうしますか？
  回答：1つの大きな図
  ```

- **図表の更新タイミング**:
  ```
  要件変更時のみ / 設計変更時も更新 / 実装完了時に最終確認
  どのタイミングで図表を更新しますか？
  回答：設計変更時も更新
  ```

#### 図表の品質基準
- **図表の理解しやすさ**:
  ```
  開発チーム向け（技術詳細重視） / ビジネスチーム向け（業務フロー重視） / 両方に対応
  主な対象者はどちらですか？
  回答：開発チーム向け（技術詳細重視）
  ```

**追加の確認事項・コメント**:
```

```

---

**このファイルの使い方**:
1. 各項目について、現在の考えや方針を記入してください
2. 不明な点や決めかねる項目は「要検討」「次回決定」等と記載してください
3. 記入完了後、次回セッションで一緒に最終調整を行います
4. このファイルを基に、実装チームが開発計画を立てられるレベルのユーザーストーリーを作成します