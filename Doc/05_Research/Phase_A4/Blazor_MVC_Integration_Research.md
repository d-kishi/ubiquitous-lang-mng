# Blazor Server・MVC統合専門技術調査

**担当**: Blazor Server・MVC統合専門アナリスト  
**実施日**: 2025-07-31  

## 🎯 根本問題特定

### **HomeController.Index()認証制御不備**
- **具体問題**: `[AllowAnonymous]`属性欠如による認証エラー
- **影響範囲**: MVC側エントリーポイント動作不良・ルーティング競合誘発

### **ルーティング優先順位設計不備**
- **技術問題**: `MapFallbackToPage`の広範囲捕捉によるMVC/Blazor競合
- **設計課題**: エントリーポイント分離パターン未実装

### **認証フロー統合設計不完全**
- **統合問題**: MVC/Blazor間認証状態遷移の非同期処理不備
- **UI/UX問題**: 認証後画面遷移・状態管理の不一致

## 🎯 適切設計方針

### **1. エントリーポイント分離パターン実装**
```
/ (ルート) → HomeController (認証前・パブリック)
/admin/* → Blazor Server (認証後・管理画面)
/dashboard/* → Blazor Server (認証後・ダッシュボード)
```

### **2. 認証状態動的ルーティング**
- 認証状態に応じた動的リダイレクト
- MVC→Blazor・Blazor→MVC間の適切遷移

### **3. レイヤー責務分離**
- **MVC責務**: 認証前エントリーポイント・パブリック画面
- **Blazor責務**: 認証後管理画面・リアルタイム機能

## 📋 Phase A4 Step3実装計画

### **ルーティング設定修正**
- Program.csルーティング優先順位適正化
- HomeController認証制御適切実装
- Blazor Server領域の明確分離